import{j as e,t as v,W as y,u as P,L as S,v as k}from"./ui-DIb4OZiY.js";import{a as c}from"./vendor-Dc3V-jfM.js";import{S as z,B as C}from"./Sidebar-Dd7tJQ2R.js";import"./index-wjvp53lN.js";function B(){const[a,f]=c.useState(""),[d,o]=c.useState([]),[m,x]=c.useState(!1),g=async()=>{var s;if(a.trim()){x(!0),o([{id:"1",name:"Análise Preliminar",status:"running"},{id:"2",name:"Extração de Dados",status:"pending"},{id:"3",name:"Análise Jurídica",status:"pending"},{id:"4",name:"Geração de Documento",status:"pending"}]);try{const n=(s=(await fetch("/api/multi-agent/run",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({document:a,steps:["analyze","extract","legal","generate"]})})).body)==null?void 0:s.getReader(),t=new TextDecoder;let l=0;for(;n;){const{done:j,value:b}=await n.read();if(j)break;const N=t.decode(b).split(`
`);for(const u of N)if(u.startsWith("data: ")){const p=JSON.parse(u.slice(6));p.type==="step_complete"&&(o(w=>w.map((i,h)=>h===l?{...i,status:"completed",output:p.output}:h===l+1?{...i,status:"running"}:i)),l++)}}}catch(r){console.error("Pipeline error:",r),o(n=>n.map(t=>t.status==="running"?{...t,status:"error"}:t))}finally{x(!1)}}};return e.jsxs("div",{className:"h-screen flex bg-stone-50",children:[e.jsx(z,{}),e.jsxs("div",{className:"flex-1 flex flex-col min-w-0",children:[e.jsxs("div",{className:"bg-white border-b border-stone-200 px-8 py-6",children:[e.jsx("h1",{className:"text-2xl font-semibold text-stone-800 mb-2",children:"Multi-Agent Pipeline"}),e.jsx("p",{className:"text-stone-500",children:"Processamento avançado com múltiplos agentes especializados"})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-soft p-6",children:[e.jsx("label",{className:"block text-sm font-medium text-stone-700 mb-3",children:"Documento ou Texto"}),e.jsx("textarea",{value:a,onChange:s=>f(s.target.value),placeholder:"Cole o texto do documento aqui...",rows:8,className:"w-full px-4 py-3 bg-stone-50 border border-stone-200 rounded-xl text-stone-700 placeholder:text-stone-400 focus:outline-none focus:ring-2 focus:ring-bronze-400/30 focus:border-bronze-400 resize-none"}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsxs(C,{onClick:g,disabled:!a.trim()||m,className:"gap-2",children:[e.jsx(v,{className:"w-4 h-4"}),m?"Processando...":"Executar Pipeline"]})})]}),d.length>0&&e.jsxs("div",{className:"bg-white rounded-xl shadow-soft p-6",children:[e.jsxs("h2",{className:"font-semibold text-stone-800 mb-4 flex items-center gap-2",children:[e.jsx(y,{className:"w-5 h-5 text-bronze-500"}),"Progresso do Pipeline"]}),e.jsx("div",{className:"space-y-4",children:d.map((s,r)=>e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsxs("div",{className:"flex-shrink-0 mt-0.5",children:[s.status==="completed"&&e.jsx(P,{className:"w-5 h-5 text-green-500"}),s.status==="running"&&e.jsx(S,{className:"w-5 h-5 text-bronze-500 animate-spin"}),s.status==="error"&&e.jsx(k,{className:"w-5 h-5 text-red-500"}),s.status==="pending"&&e.jsx("div",{className:"w-5 h-5 rounded-full border-2 border-stone-300"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"font-medium text-stone-800",children:s.name}),e.jsx("span",{className:"text-xs text-stone-500 capitalize",children:s.status})]}),s.output&&e.jsx("div",{className:"mt-2 p-3 bg-stone-50 rounded-lg",children:e.jsx("p",{className:"text-sm text-stone-600",children:s.output})})]})]},s.id))})]})]})})]})]})}export{B as MultiAgentPage};
