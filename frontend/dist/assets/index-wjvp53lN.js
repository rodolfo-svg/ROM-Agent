const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LoginPage-Cb0-UqVs.js","assets/ui-DIb4OZiY.js","assets/vendor-Dc3V-jfM.js","assets/ChatPage-921DHbUi.js","assets/Sidebar-Dd7tJQ2R.js","assets/api-CFrXpBHL.js","assets/DashboardPage-fVrKWnV7.js","assets/UploadPage-CVOdfiB-.js","assets/PromptsPage-Bb0G993w.js","assets/MultiAgentPage-DdL_49Nw.js","assets/CaseProcessorPage-CXvTGMmt.js","assets/CertidoesPage-DtSojWoO.js","assets/UsersPage-BN9kjOn8.js","assets/PartnersPage-CWGnxmV5.js","assets/ReportsPage-BMuFAhQh.js"])))=>i.map(i=>d[i]);
import{j as t}from"./ui-DIb4OZiY.js";import{b as N,g as T,R as E,a as p,c as k,d as g,N as I,B as z}from"./vendor-Dc3V-jfM.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const u of r.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&o(u)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}})();var L={},O;function U(){if(O)return L;O=1;var e=N();return L.createRoot=e.createRoot,L.hydrateRoot=e.hydrateRoot,L}var V=U();const W=T(V),q="modulepreload",F=function(e){return"/"+e},w={},j=function(a,n,o){let s=Promise.resolve();if(n&&n.length>0){let u=function(i){return Promise.all(i.map(f=>Promise.resolve(f).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),v=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));s=u(n.map(i=>{if(i=F(i),i in w)return;w[i]=!0;const f=i.endsWith(".css"),m=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${m}`))return;const d=document.createElement("link");if(d.rel=f?"stylesheet":q,f||(d.as="script"),d.crossOrigin="",d.href=i,v&&d.setAttribute("nonce",v),document.head.appendChild(d),f)return new Promise((_,S)=>{d.addEventListener("load",_),d.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${i}`)))})}))}function r(u){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=u,window.dispatchEvent(c),!c.defaultPrevented)throw u}return s.then(u=>{for(const c of u||[])c.status==="rejected"&&r(c.reason);return a().catch(r)})},C=e=>{let a;const n=new Set,o=(i,f)=>{const m=typeof i=="function"?i(a):i;if(!Object.is(m,a)){const d=a;a=f??(typeof m!="object"||m===null)?m:Object.assign({},a,m),n.forEach(_=>_(a,d))}},s=()=>a,c={setState:o,getState:s,getInitialState:()=>v,subscribe:i=>(n.add(i),()=>n.delete(i))},v=a=e(o,s,c);return c},H=(e=>e?C(e):C),B=e=>e;function J(e,a=B){const n=E.useSyncExternalStore(e.subscribe,E.useCallback(()=>a(e.getState()),[e,a]),E.useCallback(()=>a(e.getInitialState()),[e,a]));return E.useDebugValue(n),n}const $=e=>{const a=H(e),n=o=>J(a,o);return Object.assign(n,a),n},M=(e=>$);function K(e,a){let n;try{n=e()}catch{return}return{getItem:s=>{var r;const u=v=>v===null?null:JSON.parse(v,void 0),c=(r=n.getItem(s))!=null?r:null;return c instanceof Promise?c.then(u):u(c)},setItem:(s,r)=>n.setItem(s,JSON.stringify(r,void 0)),removeItem:s=>n.removeItem(s)}}const A=e=>a=>{try{const n=e(a);return n instanceof Promise?n:{then(o){return A(o)(n)},catch(o){return this}}}catch(n){return{then(o){return this},catch(o){return A(o)(n)}}}},G=(e,a)=>(n,o,s)=>{let r={storage:K(()=>localStorage),partialize:l=>l,version:0,merge:(l,P)=>({...P,...l}),...a},u=!1;const c=new Set,v=new Set;let i=r.storage;if(!i)return e((...l)=>{console.warn(`[zustand persist middleware] Unable to update item '${r.name}', the given storage is currently unavailable.`),n(...l)},o,s);const f=()=>{const l=r.partialize({...o()});return i.setItem(r.name,{state:l,version:r.version})},m=s.setState;s.setState=(l,P)=>(m(l,P),f());const d=e((...l)=>(n(...l),f()),o,s);s.getInitialState=()=>d;let _;const S=()=>{var l,P;if(!i)return;u=!1,c.forEach(h=>{var y;return h((y=o())!=null?y:d)});const b=((P=r.onRehydrateStorage)==null?void 0:P.call(r,(l=o())!=null?l:d))||void 0;return A(i.getItem.bind(i))(r.name).then(h=>{if(h)if(typeof h.version=="number"&&h.version!==r.version){if(r.migrate){const y=r.migrate(h.state,h.version);return y instanceof Promise?y.then(R=>[!0,R]):[!0,y]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,h.state];return[!1,void 0]}).then(h=>{var y;const[R,D]=h;if(_=r.merge(D,(y=o())!=null?y:d),n(_,!0),R)return f()}).then(()=>{b==null||b(_,void 0),_=o(),u=!0,v.forEach(h=>h(_))}).catch(h=>{b==null||b(void 0,h)})};return s.persist={setOptions:l=>{r={...r,...l},l.storage&&(i=l.storage)},clearStorage:()=>{i==null||i.removeItem(r.name)},getOptions:()=>r,rehydrate:()=>S(),hasHydrated:()=>u,onHydrate:l=>(c.add(l),()=>{c.delete(l)}),onFinishHydration:l=>(v.add(l),()=>{v.delete(l)})},r.skipHydration||S(),_||d},Q=G,X=M()(Q((e,a)=>({user:null,isAuthenticated:!1,isLoading:!0,error:null,login:async(n,o)=>{e({isLoading:!0,error:null});try{const r=await(await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:n,password:o})})).json();return r.success&&r.user?(e({user:r.user,isAuthenticated:!0,isLoading:!1}),!0):(e({error:r.error||"Credenciais inválidas",isLoading:!1}),!1)}catch{return e({error:"Erro ao conectar com o servidor",isLoading:!1}),!1}},logout:async()=>{try{await fetch("/api/auth/logout",{method:"POST",credentials:"include"})}catch(n){console.error("Logout error:",n)}finally{e({user:null,isAuthenticated:!1,isLoading:!1})}},checkAuth:async()=>{e({isLoading:!0});try{const n=await fetch("/api/auth/me",{credentials:"include"});if(n.ok){const o=await n.json();if(o.authenticated&&o.user){e({user:o.user,isAuthenticated:!0,isLoading:!1});return}}}catch(n){console.error("Auth check error:",n)}e({user:null,isAuthenticated:!1,isLoading:!1})},clearError:()=>e({error:null})}),{name:"rom-auth",partialize:e=>({user:e.user})})),Y=p.lazy(()=>j(()=>import("./LoginPage-Cb0-UqVs.js"),__vite__mapDeps([0,1,2])).then(e=>({default:e.LoginPage}))),Z=p.lazy(()=>j(()=>import("./ChatPage-921DHbUi.js"),__vite__mapDeps([3,1,2,4,5])).then(e=>({default:e.ChatPage}))),ee=p.lazy(()=>j(()=>import("./DashboardPage-fVrKWnV7.js"),__vite__mapDeps([6,1,2,4,5])).then(e=>({default:e.DashboardPage}))),te=p.lazy(()=>j(()=>import("./UploadPage-CVOdfiB-.js"),__vite__mapDeps([7,1,2,4])).then(e=>({default:e.UploadPage}))),re=p.lazy(()=>j(()=>import("./PromptsPage-Bb0G993w.js"),__vite__mapDeps([8,1,2,4])).then(e=>({default:e.PromptsPage}))),ne=p.lazy(()=>j(()=>import("./MultiAgentPage-DdL_49Nw.js"),__vite__mapDeps([9,1,2,4])).then(e=>({default:e.MultiAgentPage}))),se=p.lazy(()=>j(()=>import("./CaseProcessorPage-CXvTGMmt.js"),__vite__mapDeps([10,1,2,4])).then(e=>({default:e.CaseProcessorPage}))),oe=p.lazy(()=>j(()=>import("./CertidoesPage-DtSojWoO.js"),__vite__mapDeps([11,1,2,4])).then(e=>({default:e.CertidoesPage}))),ae=p.lazy(()=>j(()=>import("./UsersPage-BN9kjOn8.js"),__vite__mapDeps([12,1,2,4])).then(e=>({default:e.UsersPage}))),ie=p.lazy(()=>j(()=>import("./PartnersPage-CWGnxmV5.js"),__vite__mapDeps([13,1,2,4])).then(e=>({default:e.PartnersPage}))),ce=p.lazy(()=>j(()=>import("./ReportsPage-BMuFAhQh.js"),__vite__mapDeps([14,1,2,4])).then(e=>({default:e.ReportsPage})));function le(){return t.jsx("div",{className:"min-h-screen bg-stone-50 flex items-center justify-center",children:t.jsxs("div",{className:"flex flex-col items-center gap-4",children:[t.jsx("div",{className:"w-10 h-10 border-2 border-bronze-400 border-t-transparent rounded-full animate-spin"}),t.jsx("span",{className:"text-stone-500 text-sm",children:"Carregando..."})]})})}function x({children:e}){const{isAuthenticated:a,isLoading:n,checkAuth:o}=X();return p.useEffect(()=>{o()},[o]),n?t.jsx("div",{className:"min-h-screen bg-stone-50 flex items-center justify-center",children:t.jsxs("div",{className:"flex flex-col items-center gap-4",children:[t.jsx("div",{className:"w-10 h-10 border-2 border-bronze-400 border-t-transparent rounded-full animate-spin"}),t.jsx("span",{className:"text-stone-500 text-sm",children:"Carregando..."})]})}):a?t.jsx(t.Fragment,{children:e}):t.jsx(I,{to:"/login",replace:!0})}function ue(){return t.jsx(p.Suspense,{fallback:t.jsx(le,{}),children:t.jsxs(k,{children:[t.jsx(g,{path:"/login",element:t.jsx(Y,{})}),t.jsx(g,{path:"/dashboard",element:t.jsx(x,{children:t.jsx(ee,{})})}),t.jsx(g,{path:"/upload",element:t.jsx(x,{children:t.jsx(te,{})})}),t.jsx(g,{path:"/prompts",element:t.jsx(x,{children:t.jsx(re,{})})}),t.jsx(g,{path:"/multi-agent",element:t.jsx(x,{children:t.jsx(ne,{})})}),t.jsx(g,{path:"/case-processor",element:t.jsx(x,{children:t.jsx(se,{})})}),t.jsx(g,{path:"/certidoes",element:t.jsx(x,{children:t.jsx(oe,{})})}),t.jsx(g,{path:"/users",element:t.jsx(x,{children:t.jsx(ae,{})})}),t.jsx(g,{path:"/partners",element:t.jsx(x,{children:t.jsx(ie,{})})}),t.jsx(g,{path:"/reports",element:t.jsx(x,{children:t.jsx(ce,{})})}),t.jsx(g,{path:"/chat/:conversationId?",element:t.jsx(x,{children:t.jsx(Z,{})})}),t.jsx(g,{path:"/",element:t.jsx(x,{children:t.jsx(I,{to:"/dashboard",replace:!0})})}),t.jsx(g,{path:"*",element:t.jsx(I,{to:"/dashboard",replace:!0})})]})})}W.createRoot(document.getElementById("root")).render(t.jsx(E.StrictMode,{children:t.jsx(z,{children:t.jsx(ue,{})})}));"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/service-worker.js").then(e=>{console.log("✅ PWA: Service Worker registrado:",e.scope),setInterval(()=>{e.update()},6e4)}).catch(e=>{console.error("❌ PWA: Erro ao registrar Service Worker:",e)})});export{M as c,Q as p,X as u};
