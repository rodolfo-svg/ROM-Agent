import{j as e,U as w,l as g,F as p,a as y,D as z,p as D}from"./ui-DIb4OZiY.js";import{a as n}from"./vendor-Dc3V-jfM.js";import{S as F,B as d}from"./Sidebar-tIKYRUac.js";import"./index-23MLp_hx.js";function T(){const[f,i]=n.useState([]),[c,m]=n.useState(!1),[x,b]=n.useState(""),j=async s=>{var o;const a=Array.from(s.target.files||[]);if(a.length!==0){m(!0);try{const r=new FormData;for(const u of a)r.append("files",u);const h=await fetch("/api/kb/upload",{method:"POST",credentials:"include",body:r});if(h.ok){const v=((o=(await h.json()).documents)==null?void 0:o.map(t=>({id:t.id,name:t.name,size:t.size,uploadedAt:t.uploadedAt,structuredDocs:t.structuredDocs||0})))||[];i(t=>[...t,...v])}}catch(r){console.error("Upload error:",r)}finally{m(!1)}}},N=async s=>{try{await fetch(`/api/upload/${s}`,{method:"DELETE",credentials:"include"}),i(a=>a.filter(o=>o.id!==s))}catch(a){console.error("Delete error:",a)}},l=f.filter(s=>s.name.toLowerCase().includes(x.toLowerCase()));return e.jsxs("div",{className:"h-screen flex bg-stone-50",children:[e.jsx(F,{}),e.jsxs("div",{className:"flex-1 flex flex-col min-w-0",children:[e.jsxs("div",{className:"bg-white border-b border-stone-200 px-8 py-6",children:[e.jsx("h1",{className:"text-2xl font-semibold text-stone-800 mb-2",children:"Upload & Knowledge Base"}),e.jsx("p",{className:"text-stone-500",children:"Gerencie documentos e base de conhecimento"})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-8",children:e.jsxs("div",{className:"max-w-5xl mx-auto",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-soft p-8 mb-6",children:e.jsxs("div",{className:"border-2 border-dashed border-stone-300 rounded-xl p-12 text-center hover:border-bronze-400 hover:bg-bronze-50/50 transition-colors",children:[e.jsx("input",{type:"file",multiple:!0,onChange:j,className:"hidden",id:"file-upload",disabled:c}),e.jsxs("label",{htmlFor:"file-upload",className:"cursor-pointer",children:[e.jsx(w,{className:"w-12 h-12 text-stone-400 mx-auto mb-4"}),e.jsx("p",{className:"text-lg font-medium text-stone-700 mb-2",children:c?"Enviando arquivos...":"Clique para fazer upload"}),e.jsx("p",{className:"text-sm text-stone-500",children:"PDF, DOCX, TXT e outros formatos suportados"})]})]})}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"relative",children:[e.jsx(g,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-stone-400"}),e.jsx("input",{type:"text",placeholder:"Buscar documentos...",value:x,onChange:s=>b(s.target.value),className:"w-full h-12 pl-12 pr-4 bg-white border border-stone-200 rounded-xl text-stone-700 placeholder:text-stone-400 focus:outline-none focus:ring-2 focus:ring-bronze-400/30 focus:border-bronze-400"})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-soft overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-stone-100",children:e.jsxs("h2",{className:"font-semibold text-stone-800",children:["Documentos (",l.length,")"]})}),l.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(p,{className:"w-12 h-12 text-stone-300 mx-auto mb-3"}),e.jsx("p",{className:"text-stone-500",children:"Nenhum documento encontrado"})]}):e.jsx("div",{className:"divide-y divide-stone-100",children:l.map(s=>e.jsxs("div",{className:"px-6 py-4 flex items-center gap-4 hover:bg-stone-50 transition-colors",children:[e.jsx(p,{className:"w-5 h-5 text-bronze-500 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-stone-800 truncate",children:s.name}),e.jsxs("p",{className:"text-sm text-stone-500",children:[(s.size/1024).toFixed(2)," KB"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(d,{variant:"ghost",size:"sm",children:e.jsx(y,{className:"w-4 h-4"})}),e.jsx(d,{variant:"ghost",size:"sm",children:e.jsx(z,{className:"w-4 h-4"})}),e.jsx(d,{variant:"ghost",size:"sm",onClick:()=>N(s.id),className:"text-red-500 hover:text-red-600 hover:bg-red-50",children:e.jsx(D,{className:"w-4 h-4"})})]})]},s.id))})]})]})})]})]})}export{T as UploadPage};
