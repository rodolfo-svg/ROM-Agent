# ══════════════════════════════════════════════════════════════
# ROM AGENT - VARIÁVEIS DE AMBIENTE
# ══════════════════════════════════════════════════════════════
# Copie este arquivo para .env e preencha os valores:
#   cp .env.example .env
# ══════════════════════════════════════════════════════════════

# ==============================================================
# AWS BEDROCK (Obrigatório para modelos de IA)
# ==============================================================
AWS_ACCESS_KEY_ID=AKIA...
AWS_SECRET_ACCESS_KEY=...
AWS_REGION=us-east-1

# ==============================================================
# ANTHROPIC (Alternativo ao Bedrock)
# ==============================================================
ANTHROPIC_API_KEY=sk-ant-...

# ==============================================================
# DATAJUD (Consulta de jurisprudência)
# ==============================================================
DATAJUD_API_KEY=sua_chave_datajud

# ==============================================================
# TELEGRAM BOT (Opcional - acesso mobile)
# ==============================================================
# 1. Fale com @BotFather no Telegram
# 2. Envie /newbot e siga as instruções
# 3. Copie o token gerado aqui
TELEGRAM_BOT_TOKEN=123456789:ABC...

# ==============================================================
# S3 (Opcional - armazenamento de documentos)
# ==============================================================
S3_BUCKET=rom-agent-documents
S3_PREFIX=documents/

# ==============================================================
# BEDROCK KNOWLEDGE BASE (Opcional - RAG)
# ==============================================================
BEDROCK_KB_ID=

# ==============================================================
# SERVIDOR WEB
# ==============================================================
PORT=3000
NODE_ENV=development

# ==============================================================
# JUSBRASIL (Busca de jurisprudência autenticada)
# ==============================================================
# 1. Crie conta em https://www.jusbrasil.com.br/cadastro
# 2. Configure email e senha abaixo
JUSBRASIL_EMAIL=seu.email@exemplo.com
JUSBRASIL_SENHA=sua_senha_aqui

# ==============================================================
# GOOGLE CUSTOM SEARCH (Busca web de jurisprudência)
# ==============================================================
# 1. Acesse https://console.cloud.google.com/apis/credentials
# 2. Crie uma API Key e habilite Custom Search API
# 3. Acesse https://programmablesearchengine.google.com/
# 4. Crie um Custom Search Engine e copie o CX ID
GOOGLE_SEARCH_API_KEY=
GOOGLE_SEARCH_CX=

# ==============================================================
# ADMIN - Feature Flags Management
# ==============================================================
# Token para endpoints /admin (obrigatório)
# Gere um token seguro: openssl rand -hex 32
ADMIN_TOKEN=your-secure-admin-token-here

# ==============================================================
# FEATURE FLAGS - Go Live Acelerado 2.8.1.1
# ==============================================================
# IMPORTANTE: Todas as flags começam DESABILITADAS (false/off)
# Habilite gradualmente após testes e validação

# --- Guardrails (Tool-Loop Protection) ---
ENABLE_GUARDRAILS=false
GUARDRAIL_MODE=off
GUARDRAIL_SOFT_LIMIT=12
GUARDRAIL_HARD_LIMIT=25

# --- Retry Strategy ---
ENABLE_RETRY=false
MAX_RETRIES=3

# --- Circuit Breaker ---
ENABLE_CIRCUIT_BREAKER=false
CIRCUIT_BREAKER_THRESHOLD=5

# --- Bottleneck Limiter (Concurrency Control) ---
ENABLE_BOTTLENECK=false
MAX_CONCURRENT=6
MAX_QUEUE=10

# --- Observability ---
ENABLE_METRICS=true
LOG_LEVEL=info

# ==============================================================
# DATABASE - PostgreSQL + Redis (IMPORTANTE PARA PRODUÇÃO)
# ==============================================================
# CRÍTICO: Sem banco de dados, TODOS OS DADOS SÃO PERDIDOS em redeploy!
# No Render.com, configure PostgreSQL e Redis como serviços externos

# --- PostgreSQL (Persistência de dados) ---
# Opção 1: DATABASE_URL completa (recomendado)
DATABASE_URL=postgres://user:password@host:5432/rom_agent?sslmode=require

# Opção 2: Variáveis individuais
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_DB=rom_agent
POSTGRES_USER=postgres
POSTGRES_PASSWORD=
POSTGRES_POOL_SIZE=20

# --- Redis (Cache e Sessões) ---
# Opção 1: REDIS_URL completa (recomendado)
REDIS_URL=redis://user:password@host:6379

# Opção 2: Variáveis individuais
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# ==============================================================
# SECURITY & AUTHENTICATION (v2.8.0)
# ==============================================================

# --- Session Configuration ---
# Segredo para assinar sessões (OBRIGATÓRIO - gere com: openssl rand -base64 32)
SESSION_SECRET=your-super-secret-session-key-change-this

# --- CSRF Protection ---
# Segredo para tokens CSRF (OBRIGATÓRIO - gere com: openssl rand -base64 32)
CSRF_SECRET=your-csrf-secret-key-change-this

# ==============================================================
# EMAIL / SMTP (v2.8.0 - Para recuperação de senha e notificações)
# ==============================================================
# Configurações de email para:
# - Recuperação de senha
# - Boas-vindas
# - Notificações de segurança

# SMTP Provider (ex: Gmail, SendGrid, Mailgun)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=465
SMTP_SECURE=true
SMTP_USER=noreply@iarom.com.br
SMTP_PASS=your-smtp-password-or-app-password

# Remetente dos emails
EMAIL_FROM=IAROM <noreply@iarom.com.br>

# URL base para links de reset de senha
PASSWORD_RESET_BASE_URL=https://iarom.com.br

# ==============================================================
# PASSWORD POLICIES (v2.8.0 - Políticas de senha robustas)
# ==============================================================

# Comprimento mínimo da senha
PASSWORD_MIN_LENGTH=8

# Dias até expiração da senha (0 = sem expiração)
PASSWORD_EXPIRY_DAYS=90

# Número de senhas antigas a guardar no histórico (impede reutilização)
PASSWORD_HISTORY_COUNT=5

# ==============================================================
# BRUTE FORCE PROTECTION (v2.8.0 - Anti-hacker)
# ==============================================================

# Máximo de tentativas de login falhadas antes de bloquear conta
MAX_FAILED_LOGIN_ATTEMPTS=5

# Duração do bloqueio de conta (em minutos)
ACCOUNT_LOCK_DURATION_MINUTES=30

# Máximo de sessões simultâneas por usuário
MAX_CONCURRENT_SESSIONS=3

# ==============================================================
# IP WHITELIST (v2.8.0 - IPs confiáveis sempre permitidos)
# ==============================================================
# Lista separada por vírgulas de IPs sempre permitidos
# Ex: WHITELISTED_IPS=127.0.0.1,10.0.0.1,192.168.1.100
WHITELISTED_IPS=
